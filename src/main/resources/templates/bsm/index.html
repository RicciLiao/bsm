<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link href="../bsm/html/import.html" rel="import" type="text/html"/>

    <style>

        .navbar {
            padding-top: 0;
            padding-bottom: 0;
        }

        .user-logo-container {
            padding: 10px;
        }

        .user-logo-container:hover {
            background: #dddddd;
        }

        .user-logo-container .user-logo {
            border: 3px solid gold;
            width: 40px;
            height: 40px;
            bottom: 2.5rem;
            cursor: pointer;
            overflow: hidden;
        }

        .user-logo img {
            width: 100%;
        }

        #top-navbar #navbarSupportedContent .searchCondition .input-group input[type=text] {
            width: 260px;
        }

        #top-navbar #navbarSupportedContent .navbar-nav .dropdown a {
            cursor: pointer;
        }

        body {
            font-size: 15px;
        }

        #top-navbar #navbarSupportedContent .nav-left-links .nav-item {
            cursor: pointer;
        }

        #top-navbar #navbarSupportedContent .nav-left-links .bsm-icon-link a {
            display: inline;
        }

        #top-navbar #navbarSupportedContent .nav-left-links .bsm-icon-link span {
            padding-right: 0.25rem;
        }

        .card-columns {
            column-count: 4;
            -moz-column-count: 4;
            -webkit-column-count: 4;
            margin-top: 10px;
        }

        .card-columns div {
            cursor: pointer;
            border: none !important;
        }

        .card-columns .card:hover {
            box-shadow: 0px 0px 20px #888888;
        }

        .card-columns .item-container-img-cover {
            position: absolute;
            width: 100%;
        }

    </style>

</head>
<body onload="indexInit()">

<nav id="top-navbar" class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">
        <img width="40px" src="../bsm/pic/svg/logo.svg">
    </a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">

        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="#" th:text="#{userAgreement}"></a>
                <!--<a class="nav-link" href="#">Home</a>-->
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown"
                   aria-haspopup="true" aria-expanded="false">
                    Dropdown
                </a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="#">Action</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#">Something else here</a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link disabled" href="#">Disabled</a>
            </li>
        </ul>

        <ul class="navbar-nav mr-5 nav-left-links">
            <li class="nav-item bsm-icon-link bsm-create-blog" th:title="#{bsm-create-blog-title}">
                <span class="input-group-addon glyphicon glyphicon-leaf"></span>
                <a th:text="#{bsm-create-blog}"></a>
            </li>
        </ul>

        <ul class="navbar-nav mr-5 nav-left-links user-logo-container">
            <div class="btn-group">
                <div class="img-circle user-logo" data-toggle="dropdown">
                    <img src="../bsm/pic/user.jpg">
                </div>
                <button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false"></button>
                <div class="dropdown-menu dropdown-menu-right">
                    <button class="dropdown-item" type="button">Action</button>
                    <button class="dropdown-item" type="button">Another action</button>
                    <button class="dropdown-item" type="button">Something else here</button>
                </div>
            </div>
        </ul>

        <div class="form-inline my-2 my-lg-0 searchCondition">
            <div class="input-group">
                <div class="input-group-prepend">
                    <button type="button" class="btn btn-primary searchLabel">Action</button>
                    <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item">Action</a>
                        <a class="dropdown-item">Another action</a>
                        <a class="dropdown-item">Something else here</a>
                        <div role="separator" class="dropdown-divider"></div>
                        <a class="dropdown-item">Separated link</a>
                    </div>
                </div>
                <input type="text" class="form-control" aria-label="Text input with segmented dropdown button">
            </div>
        </div>

    </div>
</nav>

<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        <!--        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>-->
    </ol>
    <div class="carousel-inner" style="height: 450px">
        <div class="carousel-item active" style="height: inherit;background: gray">
            <img class="d-block" src="../bsm/pic/svg/loading_A.svg" alt="First slide"
                 style="margin: 0 auto;height: inherit">
        </div>
        <!--        <div class="carousel-item" style="height: inherit;background: gray">
                    <img class="d-block w-25" src="../bsm/pic/svg/loading_A.svg" alt="Second slide">
                </div>
                <div class="carousel-item" style="height: inherit;background: gray">
                    <img class="d-block w-25" src="../bsm/pic/svg/loading_A.svg" alt="Third slide">
                </div>-->
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-2 pt-3 pb-3" style="background: #0c5460"></div>

        <div class="col-8">
            <div class="card-columns" id="itemListContainer"></div>
        </div>

        <div class="col-2 pt-3 pb-3" style="background: #0c5460"></div>
    </div>
</div>

<script th:inline="javascript">

    function indexInit() {

        $('#carouselExampleIndicators').animate({
            marginTop: $('#top-navbar').outerHeight() + 'px'
        }, 600);

        $('.user-logo-container').on({
            mouseover: function () {
                $('.user-logo-container .dropdown-menu').show();
            },
            mouseout: function () {
                $('.user-logo-container .dropdown-menu').hide();
            }
        });

        $('#top-navbar #navbarSupportedContent .searchCondition .input-group .input-group-prepend .dropdown-menu .dropdown-item').on({
            click: function () {
                $('#top-navbar #navbarSupportedContent .searchCondition .input-group .input-group-prepend .searchLabel').text(this.innerText);
            }
        });

        $('#top-navbar #navbarSupportedContent .nav-left-links .bsm-create-blog').on({
            mouseover: function () {
                $(this).css('color', 'red');
            },
            mouseout: function () {
                $(this).css('color', '');
            },
            click: function () {
                commonFunc.newFormJump(BEU_CreateBlog);
            }
        });

        var params = {
            type: "index"
        };

        $.ajax({
            type: _AJAX_TYPE,
            url: BEU_GetItemList,
            data: JSON.stringify(params),
            dataType: _AJAX_DATA_TYPE,
            contentType: _AJAX_CONTENT_TYPE,
            success: function (response) {
                buildItemList(response)
            },
            error: function (response) {
                console.log(response);
            }
        });
    }

    function buildItemList(itemList) {
        var itemListContainer = document.getElementById('itemListContainer'),
            itemContainer,
            itemContainerImgContainer,
            itemContainerImgCover,
            itemContainerImg,
            itemContainerDivFirst,
            itemContainerTitle,
            itemContainerAnnotation,
            itemContainerFooter,
            itemContainerLastModify,
            itemContainerUserName;
        for (var i = 0; i < itemList.length; i++) {

            itemContainer = document.createElement('div');
            itemContainer.setAttribute('class', 'card');

            itemContainerImg = document.createElement('img');
            itemContainerImg.setAttribute('class', 'card-img-top');
            itemContainerImg.setAttribute('src', '../bsm/pic/background.jpg');
            itemContainerImg.setAttribute('alt', 'Card image cap');

            itemContainerImgContainer = document.createElement('div');

            itemContainerImgCover = document.createElement('div');
            itemContainerImgCover.setAttribute('class', 'item-container-img-cover text-center');
            itemContainerImgCover.innerHTML = "123";

            itemContainerDivFirst = document.createElement('div');
            itemContainerDivFirst.setAttribute('class', 'card-body');

            itemContainerTitle = document.createElement('h5');
            itemContainerTitle.setAttribute('class', 'card-title');
            itemContainerTitle.innerText = itemList[i].itemName || '';

            itemContainerAnnotation = document.createElement('p');
            itemContainerAnnotation.setAttribute('class', 'card-text');
            itemContainerAnnotation.innerText = itemList[i].itemAnnotation || '';

            itemContainerDivFirst.appendChild(itemContainerTitle);
            itemContainerDivFirst.appendChild(itemContainerAnnotation);

            itemContainerFooter = document.createElement('div');
            itemContainerFooter.setAttribute('class', 'card-footer text-right');

            itemContainerLastModify = document.createElement('small');
            itemContainerLastModify.setAttribute('class', 'text-muted');
            if ((itemList[i].itemLastModifiedDate || '').length !== 0) {
                itemContainerLastModify.innerHTML = [[#{updateTime}]] + itemList[i].itemLastModifiedDate + '<br>';
            } else {
                itemContainerLastModify.innerHTML = [[#{createTime}]] + itemList[i].itemCreateDate + '<br>';
            }

            itemContainerUserName = document.createElement('small');
            itemContainerUserName.setAttribute('class', 'text-muted font-weight-bold');
            itemContainerUserName.innerText = [[#{author}]] + itemList[i].userName;

            itemContainerFooter.appendChild(itemContainerLastModify);
            itemContainerFooter.appendChild(itemContainerUserName);

            itemContainerImgContainer.appendChild(itemContainerImgCover);
            itemContainerImgContainer.appendChild(itemContainerImg);

            itemContainer.appendChild(itemContainerImgContainer);
            itemContainer.appendChild(itemContainerDivFirst);
            itemContainer.appendChild(itemContainerFooter);

            itemListContainer.appendChild(itemContainer);

            $(itemContainerImgCover).height($(itemContainerImg).height());
        }

        $('.card-columns .card').on({
            mouseover: function () {
                $(this).find('.item-container-img-cover').css('background', 'rgba(0,0,0,0.5)');
            },
            mouseout: function () {
                $(this).find('.item-container-img-cover').css('background', 'rgba(0,0,0,0)');
            },
            click: function () {

            }
        });
    }

</script>

</body>
</html>